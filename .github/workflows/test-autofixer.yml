name: "Test Security Autofixer"

on:
  workflow_dispatch:
    inputs:
      alert-number:
        description: 'Security alert number to fix'
        required: true
        type: string

permissions:
  contents: write
  pull-requests: write
  security-events: read

jobs:
  fix-vulnerability:
    uses: Princetopia/claude-security-autofixer/.github/workflows/fix-vulnerability.yml@main
    with:
      alert-number: ${{ inputs.alert-number }}
      base-ref: main
    secrets:
      github-token: ${{ secrets.GH_PAT }}
      anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}

